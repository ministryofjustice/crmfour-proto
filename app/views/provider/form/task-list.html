{% extends "layouts/main.html" %}

{% block header %}
  {% include "includes/header.html"%}
{% endblock %}

{% block pageTitle %}
  Your application progress – {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{% block beforeContent %}
  {% include "includes/banner.html"%}

  {{ govukBackLink({
    text: "Back to My applications",
    href: "../crm-apps"
  }) }}

{% endblock %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
        Your application progress
      </h1>
    </div>
  </div>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      
      <p class="govuk-body govuk-!-margin-bottom-7">If you leave this page before submitting, you can return later to complete the application.</p>
      <ol class="govuk-prototype-kit-task-list">
        <!--Question 1-->
        <li>
          <h2 class="govuk-prototype-kit-task-list__section">
            <span class="govuk-prototype-kit-task-list__section-number">1. </span> About you
          </h2>
          <ul class="govuk-prototype-kit-task-list__items">
            <!--Question 1 - your details-->
            <li class="govuk-prototype-kit-task-list__item">
              
              {% if data['question1-org'] == null or data['question1-org'] == "not-started" %}
                <!--If question1-org has not been started show the status Not started AND for the proto I'm removing the visited link status for this link so it looks fresh each time-->
                <span class="govuk-prototype-kit-task-list__task-name">
                  <a href="question1-org?question1-org=in-progress" class="govuk-link--no-visited-state"  aria-describedby="company-information-status">
                    Your details
                  </a>
                </span>
                <strong class="govuk-tag govuk-tag--grey govuk-prototype-kit-task-list__tag" id="company-information-status">Not started</strong>
                {% else %}
                <!--For all other states AND show visited link status-->
                <span class="govuk-prototype-kit-task-list__task-name">
                  <a href="question1-org" aria-describedby="company-information-status">
                    Your details
                  </a>
                </span>
                {% if data['question1-org'] =="complete" %}
                  <!--If question2-org is complete, show the status Complete-->
                  <strong class="govuk-tag govuk-prototype-kit-task-list__tag" id="company-information-status">Complete</strong>
                  {% else %}
                  {% if data['question1-org'] =="in-progress" %}
                    <!--If question2-org is in-progress, show the status In-progress-->
                    <strong class="govuk-tag govuk-tag--grey govuk-prototype-kit-task-list__tag" id="company-information-status">In progress</strong>
                  {% endif %}
                {% endif %}
              {% endif %}
            </li>
          </ul>
        </li>
        <!--Question 2-->
        <li>
          <h2 class="govuk-prototype-kit-task-list__section">
            <span class="govuk-prototype-kit-task-list__section-number">2. </span> About your client
          </h2>
          <ul class="govuk-prototype-kit-task-list__items">
            <!--Section 2 - Client details-->
            <li class="govuk-prototype-kit-task-list__item">
              {% if data['question2-client'] == null or data['question2-client'] == "not-started" %}
                <!--If question2-org has not been started show the status Not started AND for the proto I'm removing the visited link status for this link so it looks fresh each time-->
                <span class="govuk-prototype-kit-task-list__task-name">
                  <a href="question2-client?question2-client=in-progress" class="govuk-link--no-visited-state"  aria-describedby="company-information-status">
                    Client details
                  </a>
                </span>
                <strong class="govuk-tag govuk-tag--grey govuk-prototype-kit-task-list__tag" id="company-information-status">Not started</strong>
                {% else %}
                <!--For all other states AND show visited link status-->
                <span class="govuk-prototype-kit-task-list__task-name">
                  <a href="question2-client" aria-describedby="company-information-status">
                    Client details
                  </a>
                </span>
                {% if data['question2-client'] =="complete" %}
                  <!--If question2-org is complete, show the status Complete-->
                  <strong class="govuk-tag govuk-prototype-kit-task-list__tag" id="company-information-status">Complete</strong>
                  {% else %}
                  {% if data['question2-client'] =="in-progress" %}
                    <!--If question2-org is in-progress, show the status In-progress-->
                    <strong class="govuk-tag govuk-tag--grey govuk-prototype-kit-task-list__tag" id="company-information-status">In progress</strong>
                  {% endif %}
                {% endif %}
              {% endif %}
            </li>

            <!--Section 2 - question b-->
            <li class="govuk-prototype-kit-task-list__item">
              {% if data['question2'] == null or data['question2'] == "not-started" %}
                <!--If question2-org has not been started show the status Not started AND for the proto I'm removing the visited link status for this link so it looks fresh each time-->
                <span class="govuk-prototype-kit-task-list__task-name">
                  <a href="question1-org?question1-org=in-progress" class="govuk-link--no-visited-state"  aria-describedby="company-information-status">
                    Your details
                  </a>
                </span>
                <strong class="govuk-tag govuk-tag--grey govuk-prototype-kit-task-list__tag" id="company-information-status">Not started</strong>
                {% else %}
                <!--For all other states AND show visited link status-->
                <span class="govuk-prototype-kit-task-list__task-name">
                  <a href="question1-org" aria-describedby="company-information-status">
                    Your details
                  </a>
                </span>
                {% if data['question2'] =="complete" %}
                  <!--If question2-org is complete, show the status Complete-->
                  <strong class="govuk-tag govuk-prototype-kit-task-list__tag" id="company-information-status">Complete</strong>
                  {% else %}
                  {% if data['question2'] =="in-progress" %}
                    <!--If question2-org is in-progress, show the status In-progress-->
                    <strong class="govuk-tag govuk-tag--grey govuk-prototype-kit-task-list__tag" id="company-information-status">In progress</strong>
                  {% endif %}
                {% endif %}
              {% endif %}
            </li>

          </ul>
        </li>
        <!--Question 3-->
        <li>
          <h2 class="govuk-prototype-kit-task-list__section">
            <span class="govuk-prototype-kit-task-list__section-number">3. </span> Apply
          </h2>
          <ul class="govuk-prototype-kit-task-list__items">
            {% if data['question1'] != "complete" %}
              <!--If the first question is not complete, all of the other questions are the status Cannot start-->
              <li class="govuk-prototype-kit-task-list__item">
                <span class="govuk-prototype-kit-task-list__task-name">
                  Submit and pay
                </span>
                <strong class="govuk-tag govuk-tag--grey govuk-prototype-kit-task-list__tag" id="submit-pay-status">Cannot start yet</strong>
              </li>

              {% else %}

              <li class="govuk-prototype-kit-task-list__item">
                <span class="govuk-prototype-kit-task-list__task-name">
                  <a href="check-answers" aria-describedby="contact-details-status">
                    Submit and pay
                  </a>
                </span>
                {% if data[''] =="complete" %}
                  <!--If question2-org is complete, show the status Complete-->
                  <strong class="govuk-tag govuk-prototype-kit-task-list__tag" id="company-information-status">Complete</strong>
                  {% else %}
                  {% if data[''] =="in-progress" %}
                    <!--If question2-org is in-progress, show the status In-progress-->
                    <strong class="govuk-tag govuk-tag--grey govuk-prototype-kit-task-list__tag" id="company-information-status">In progress</strong>
                    {% else %}
                    <!--If question2-org is not complete or in-progress, show the status Not started-->
                    <strong class="govuk-tag govuk-tag--grey govuk-prototype-kit-task-list__tag" id="company-information-status">Not started</strong>
                  {% endif %}
                {% endif %}
              </li>
            {% endif %}
          </ul>
        </li>
      </ol>
    </div>
    <div class="govuk-grid-column-one-third">
      <aside class="app-related-items" role="complementary">
        <ul class="govuk-list govuk-!-font-size-16">
          <li>
            <strong>Unique file reference</strong>   
            <br>{{data['ufn'] or "100323/234234"}}
          </li>
          <li>
            <strong>LAA Reference number</strong>   
            <br>{{data['laa-ref'] or "LAA-5a7d3c"}}
          </li>
        </ul>
      </aside>
    </div>
  </div>

{% endblock %}
